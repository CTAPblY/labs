<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <style type="text/css">
            td {
              padding: 0 15px;
            }
            th {
                padding: 0 15px;
            }
          </style>
          
        <meta charset="utf-8">


    </head>
    <body>
        <div class = container>
            <h3>Number table</h3> 
            <form id="myForm" action="http://localhost:3000/api/numbers" method="get">
                <p>
                <label>Имя</label><br>
                <input type="number" name="id"/>
                <input type="submit" value="Отправить"/>
                </p>
            </form>


            <script>
            
                const myForm = document.getElementById("myForm");
                myForm.addEventListener("submit", async (e)=>{
                    e.preventDefault();
                    const id = myForm.id.value;
                    var request = new XMLHttpRequest();
                    if (id < 21){
                    request.open('GET', `http://localhost:3000/api/numbers?search=${id}`);
                    request.onload = () => {
                        const results = JSON.parse(request.responseText);
                        if (results.length > 0){
                            for (var i = 0; i < results.length; i++){
                                let table = document.getElementById('tableBody');
                                let row = document.createElement("tr")
                                let c1 = document.createElement("td")
                                let c2 = document.createElement("td")
                                let c3 = document.createElement("td")
                                
                                c1.innerText = `${results[i].id}`;
                                c2.innerText = `${results[i].numb}`;
                                c3.innerText = `${results[i].country}`;

                                row.appendChild(c1);
                                row.appendChild(c2);
                                row.appendChild(c3);
                                table.appendChild(row);
                            }
                        }
                    }
                    request.send();
                    }
                });
            </script>
      
            <div> 
                <table id="myTable">
                    <thead>
                       <th>  ID</th>
                       <th> Number </th>
                       <th> Country </th>
                    </thead>
                    <tbody id="tableBody">
                        
                    </tbody>
            </div> 

        </div>
    </body>
</html>